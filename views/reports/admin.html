<!-- Container fluid -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card">

        <!-- FILTER SECTION -->
        <div class="card-header all-report-filter">
          <div class="row align-items-end">
            <!-- Start Date -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label>Start Date</label>
                <div class="input-group date" id="startDateAdminPicker" data-target-input="nearest">
                  <div class="input-group-prepend" data-target="#startDateAdminPicker" data-toggle="datetimepicker">
                    <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                  </div>
                  <input type="text" id="adminReportStartDate" class="form-control datetimepicker-input date"
                    data-target="#startDateAdminPicker" />
                </div>
              </div>
            </div>

            <!-- End Date -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label>End Date</label>
                <div class="input-group date" id="endDateAdminPicker" data-target-input="nearest">
                  <div class="input-group-prepend" data-target="#endDateAdminPicker" data-toggle="datetimepicker">
                    <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                  </div>
                  <input type="text" id="adminReportEndDate" class="form-control datetimepicker-input"
                    data-target="#endDateAdminPicker" />
                </div>
              </div>
            </div>

            <!-- Filter Button -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label class="d-none d-lg-block">&nbsp;</label>
                <button id="adminFilterBtn" class="btn btn-primary btn-block">
                  <i class="fas fa-filter"></i> Filter
                </button>
              </div>
            </div>

            <!-- Export Dropdown -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label class="d-none d-lg-block">&nbsp;</label>
                <div class="dropdown">
                  <button class="btn btn-outline-success btn-block dropdown-toggle" type="button" id="exportDropdown"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-file-export"></i> Export
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                    <li><a class="dropdown-item" href="#" id="exportCSV">Print to CSV</a></li>
                    <li><a class="dropdown-item" href="#" id="exportPDF">Print to PDF</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- REPORT TABLE SECTION -->
        <div class="card-body">

          <!-- HEADER INSIDE REPORT TABLE AREA -->
          <div class="d-flex justify-content-between align-items-center flex-wrap border rounded p-3 mb-4"
           >
            <!-- Left: Logo + Report Title -->
            <div class="d-flex align-items-center mb-2 mb-md-0">
              <img src="#" alt="Company Logo" class="me-3 account-logo"
                   style="height: 55px; width: auto;">
              <div>
                <h5 class="fw-bold text-uppercase mb-0 ml-2">System Administration Report</h5>
                <h7 id="report-company-name" class="text-muted account-name ml-2 h">Company Name Here</h7>
              </div>
            </div>

            <!-- Right: Date Range -->
            <div class="text-end">
              <p class="mb-1 fw-semibold text-dark">
                <i class="far fa-calendar-alt text-orange me-2"></i>
                <span id="adminReportDateRange">1 Oct 2025 - 17 Oct 2025</span>
              </p>
              <small class="text-muted">Generated on: <span id="adminReportGeneratedDate"></span></small>
            </div>
          </div>

          <!-- REPORT TABLE -->
          <div id="tab">
            <table id="admin-report-stats" class="table table-bordered table-hover report-table">
              <thead class="table bg-secondary">
                <tr>
                  <th>Category</th>
                  <th>Definition</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                <!-- Users Overview -->
                <tr>
                  <td rowspan="2" style="width: 20%;">Users Overview</td>
                  <td>Total Users</td>
                  <td  id="totalUsers"></td>
                </tr>
                <tr>
                  <td>Total Branches</td>
                  <td  id="totalBranches"></td>
                </tr>

                <!-- Invitations -->
                <tr>
                  <td rowspan="3">Invitations</td>
                  <td>Total Invitations</td>
                  <td   id="totalInvitations"></td>
                </tr>
                <tr>
                  <td>Accepted (Yes)</td>
                  <td   id="acceptedYes"></td>
                </tr>
                <tr>
                  <td>Accepted (No)</td>
                  <td   id="acceptedNo"></td>
                </tr>

                <!-- User Roles -->
                <tr>
                  <td rowspan="4">User Roles</td>
                  <td>System Administrator</td>
                  <td id="roleSysAdmin"></td>
                </tr>
                <tr>
                  <td>Loan Officer</td>
                  <td id="roleLoanOfficer"></td>
                </tr>
                <tr>
                  <td>Branch Loan Officer</td>
                  <td id="roleBranchLoanOfficer"></td>
                </tr>
                <tr>
                  <td>Co-Owner</td>
                  <td id="roleCoOwner"></td>
                </tr>

                <!-- Branch Users -->
                 <tr>
                  <td rowspan="1">Branch User Count</td>
                  <td colspan="2">
                    <table class="table table-sm table-borderless mb-0" id="branchUserRows"></table>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script>

  $(".date").datetimepicker({ format: "DD/MMM/YYYY" });

  // Show today's date
  var today = new Date();
  $("#adminReportGeneratedDate").text(today.toLocaleDateString("en-GB", {
    day: "2-digit", month: "short", year: "numeric"
  }));

  $(".account-name").text(sessionStorage.getItem("account_name"));
  $(".account-logo").attr("src", sessionStorage.getItem("account_logo"));


</script>

<!-- Custom Styles -->
<style>
  .text-orange {
    color: #ff8c00 !important;
  }

  .table th,
  .table td {
    vertical-align: middle;
  }

  .report-table {
    font-size: 0.95rem;
  }
</style>