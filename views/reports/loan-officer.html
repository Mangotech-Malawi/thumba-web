<!-- Container fluid -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card">

        <div class="card-header all-report-filter">
          <div class="row align-items-end">
            <!-- Start Date -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label>Start Date</label>
                <div class="input-group date" id="startDatePicker" data-target-input="nearest">
                  <div class="input-group-prepend" data-target="#startDatePicker" data-toggle="datetimepicker">
                    <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                  </div>
                  <input type="text" id="startDate" class="form-control datetimepicker-input"
                    data-target="#startDatePicker" />
                </div>
              </div>
            </div>

            <!-- End Date -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label>End Date</label>
                <div class="input-group date" id="endDatePicker" data-target-input="nearest">
                  <div class="input-group-prepend" data-target="#endDatePicker" data-toggle="datetimepicker">
                    <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                  </div>
                  <input type="text" id="endDate" class="form-control datetimepicker-input"
                    data-target="#endDatePicker" />
                </div>
              </div>
            </div>

            <!-- Filter Button -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label class="d-none d-lg-block">&nbsp;</label>
                <button id="filterBtn" class="btn btn-primary btn-block">
                  <i class="fas fa-filter"></i> Filter
                </button>
              </div>
            </div>

            <!-- Export Dropdown -->
            <div class="col-sm-12 col-md-6 col-lg-2">
              <div class="form-group">
                <label class="d-none d-lg-block">&nbsp;</label>
                <div class="dropdown">
                  <button class="btn btn-secondary btn-block dropdown-toggle" type="button" id="exportDropdown"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-file-export"></i> Export
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                    <li><a class="dropdown-item" href="#" id="exportCSV">Print to CSV</a></li>
                    <li><a class="dropdown-item" href="#" id="exportPDF">Print to PDF</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Report Table -->
        <div class="card-body">
          <div id="tab">
            <br />
            <table id="loan-client-stats-report" name="LoanClientStats"
              class="table table-bordered table-hover report-table">
              <thead>
                <tr class="bg-light">
                  <th>Category</th>
                  <th>Definition</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>

                <tr>
                  <td rowspan="9" style="width: 20%">Clients</td>
                  <td>Total Clients</td>
                  <td id="totalClients"></td>
                </tr>
                <tr>
                  <td>Active Clients</td>
                  <td id="activeClients"></td>
                </tr>
                <tr>
                  <td>Dormant Clients</td>
                  <td id="dormantClients"></td>
                </tr>
                <tr>
                  <td>Individual Clients</td>
                  <td id="individualClients"></td>
                </tr>
                <tr>
                  <td>Group Clients</td>
                  <td id="groupClients"></td>
                </tr>
                <tr>
                  <td>Institutional Clients</td>
                  <td id="institutionalClients"></td>
                </tr>
                <tr>
                  <td>Investors</td>
                  <td id="investorsCount"></td>
                </tr>
                <tr>
                  <td>Loan Applicants</td>
                  <td id="loanApplicantsCount"></td>
                </tr>
                <tr>
                  <td>Client Growth Rate (%)</td>
                  <td id="clientGrowthRate"></td>
                </tr>

                <!-- Loan Applications -->
                <tr>
                  <td rowspan="6">Loan Applications</td>
                  <td>Total Applications</td>
                  <td id="totalApplications"></td>
                </tr>
                <tr>
                  <td>Approved Applications</td>
                  <td id="approvedApplications"></td>
                </tr>
                <tr>
                  <td>Rejected Applications</td>
                  <td id="rejectedApplications"></td>
                </tr>
                <tr>
                  <td>Pending Applications</td>
                  <td id="pendingApplications"></td>
                </tr>
                <tr>
                  <td>Approval Rate (%)</td>
                  <td id="approvalRate"></td>
                </tr>
                <tr>
                  <td>Average Loan Size</td>
                  <td id="avgLoanSize"></td>
                </tr>

                <!-- Loan Disbursement -->
                <tr>
                  <td rowspan="5">Loan Disbursements</td>
                  <td>Total Disbursed Amount</td>
                  <td id="totalDisbursed"></td>
                </tr>
                <tr>
                  <td>Disbursement Rate (%)</td>
                  <td id="disbursementRate"></td>
                </tr>
                <tr>
                  <td>Active Loans</td>
                  <td id="activeLoans"></td>
                </tr>
                <tr>
                  <td>Closed Loans</td>
                  <td id="closedLoans"></td>
                </tr>
                <tr>
                  <td>Average Disbursement Time</td>
                  <td id="avgDisbTime"></td>
                </tr>

                <!-- Loan Repayments -->
                <tr>
                  <td rowspan="6">Repayments & Recovery</td>
                  <td>Total Repaid Amount</td>
                  <td id="totalRepaid"></td>
                </tr>
                <tr>
                  <td>Outstanding Balance</td>
                  <td id="outstandingBalance"></td>
                </tr>
                <tr>
                  <td>Total Defaulters</td>
                  <td id="totalDefaulters"></td>
                </tr>
                <tr>
                  <td>Recovery Rate (%)</td>
                  <td id="recoveryRate"></td>
                </tr>
                <tr>
                  <td>PAR (Portfolio at Risk)</td>
                  <td id="par"></td>
                </tr>
                <tr>
                  <td>Write-offs</td>
                  <td id="writeOffs"></td>
                </tr>

                <!-- Planning -->
                <tr>
                  <td rowspan="4">Remediation & Planning</td>
                  <td>Key Challenges</td>
                  <td></td>
                </tr>
                <tr>
                  <td>Action Plan</td>
                  <td></td>
                </tr>
                <tr>
                  <td>Responsible Staff</td>
                  <td></td>
                </tr>
                <tr>
                  <td>Timeline</td>
                  <td></td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="js/reports/loan_client_reports.js" type="module"></script>
<script>
  $(function () {
    $(".date").datetimepicker({
      format: "DD/MMM/YYYY",
    });
  });
</script>